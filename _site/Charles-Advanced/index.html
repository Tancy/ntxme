<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Charles 高级篇 | Tancy/晓田</title>
    <meta name="author" content="Tancy" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Focus mobile web" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="apple-touch-icon-precomposed" href="/logo.png" sizes="114x114" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
</head>
<body>
    <div id="topbar"></div>
    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">Tancy/晓田</a>
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    .home-menu-icon{color: #000}
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/Charles-Advanced" title="Charles 高级篇">Charles 高级篇</a></h1>
        <p class="entry-date">2014-07-21</p>
        <p>基础篇讲解了Charles最常用功能代理的使用，高级篇继续演示Charles的特色有趣的功能。</p>

<h2>网速模拟功能</h2>

<p>throttle功能对于前端来说非常实用，可以看页面在低网速下的表现，从而找出优化的点。
在线上环境通常有些因为网速慢导致的bug，在本机无法重现，那时候就很抓瞎，如果嫌远程麻烦，推荐使用throttle。</p>

<p>首先先配置下throttle。</p>

<div>
    <img style="width: 100%;" src="http://gtms01.alicdn.com/tps/i1/TB12wOAFVXXXXcmXXXXVcq6YpXX-2124-1384.png" alt="Charles 设置Throttle">
</div>


<p>设置各种网络速率</p>

<div>
    <img style="width: 100%;" src="http://gtms04.alicdn.com/tps/i4/TB1vdqsFVXXXXcoXFXXSByXHVXX-1100-1144.png" alt="Charles 设置Throttle">
</div>


<p>（Charles的预配置对于中国的网络环境并不准确，电信、移动、网通的速度还有有明显差异。）
解析下图上几个配置的含义：
Bandwidth（带宽）、Utilistation（利用百分比）、Round-trip（往返延迟）、MTU（字节）。</p>

<h2>牛逼的断点功能</h2>

<p>Charles另一个非常实用的功能，对于开发者和测试人员来说，堪称神器。Charles能够断到发送请求前（篡改Request）和请求后（篡改Response）。</p>

<p>场景：ajax发送请求，我们需要测试接口的各种边界情况，比如出错、超时等表现，Charles的断点+随意篡改，非常方便测试。</p>

<p>针对某一个请求，右键选择“BreakPoints”，开启断点。</p>

<div>
    <img style="width: 100%;" src="http://gtms02.alicdn.com/tps/i2/TB1pb5iFVXXXXaVaXXXEY0C6VXX-2126-1332.png" alt="Charles 设置断点">
</div>


<p>小技巧：不用在web界面中操作，使用repeat功能，就可再次发送一样的请求：</p>

<div>
    <img style="width: 100%;" src="http://gtms01.alicdn.com/tps/i1/TB1tCWyFVXXXXXEXpXXqNZYGFXX-912-670.png" alt="Charles 重新请求">
</div>


<h3>断点列表查看</h3>

<div>
    <img style="width: 100%;" src="http://gtms03.alicdn.com/tps/i3/TB1.iylFVXXXXayaXXXJcUmOVXX-2122-1382.png" alt="Charles 断点列表">
</div>


<p>可以指定断点“get”请求还是“post”请求。</p>

<h2>重复发送请求</h2>

<p>repeat功能对于测试同学特别有用，可以检验接口的健壮性。
repeat功对于前端的价值是不需要刷新页面，只需要repeat请求，比如检验代理是否成功，修改请求后执行等。</p>

<div>
    <img style="width: 100%;" src="http://gtms01.alicdn.com/tps/i1/TB1tCWyFVXXXXXEXpXXqNZYGFXX-912-670.png" alt="Charles 重复请求">
</div>


<p>“repeat”重复发送一次请求。</p>

<p>“repeat Advances”可以自定义重复次数和重复间隔。</p>

<div>
    <img style="width: 100%;" src="http://gtms02.alicdn.com/tps/i2/TB1hfGpFVXXXXczXFXXI.IF6XXX-1434-956.png" alt="Charles 自定义重复次数和重复间隔">
</div>


<h2>捕获记录控制</h2>

<p>捕获的请求太多，容易产生干扰，Charles可以对捕获记录进行过滤。</p>

<p>然后配置“exclude”：</p>

<div>
    <img style="width: 100%;" src="http://gtms03.alicdn.com/tps/i3/TB1SImyFVXXXXcRXXXX6aMrIXXX-2128-1380.png" alt="Charles 记录过滤">
</div>


<h2>web界面</h2>

<p>Charles有个有趣的web界面：</p>

<div>
    <img style="width: 100%;" src="http://gtms02.alicdn.com/tps/i2/TB1Jk5pFVXXXXcTXFXXXpwU2VXX-1096-1034.png" alt="Charles 记录过滤">
</div>


<p>强大的是可以控制是否远程可以访问这个界面，还可以设置用户名和密码…碉堡了…</p>

<p>浏览器输入http://control.charles/ ：</p>

<div>
    <img style="width: 100%;" src="http://gtms01.alicdn.com/tps/i1/TB14YKiFVXXXXXPaXXXoKiP5pXX-1644-934.png" alt="Charles 记录过滤">
</div>


<p>Charles还有其他有趣功能等待大家挖掘...</p>


        <div id="disqus_container">
            <div style="margin-bottom:20px" class="right">
                Tancy/晓田
            </div>
            <a href="#" class="comment" onclick="return false;">点击查看评论</a>
            <div id="disqus_thread"></div>
        </div>
    </div>

    <div class="sidenav">
        <img width="74px" height="74px" class="d6" src="https://lh6.googleusercontent.com/-9Wkbrpp34xc/AAAAAAAAAAI/AAAAAAAAAAA/uSFhovwkJ7g/s148-c-k/photo.jpg" aria-label="您的个人资料图片">
        <ul>
            <li>Tancy/晓田</li>
            <li>HangZhou,China</li>
        </ul>
    </div>

    <div class="sidenav">
        <h2>Blog</h2>
        <ul class="artical-list">
        
            <li><a href="/Charles-SSL">Charles 之SSL</a></li>
        
            <li><a href="/Charles-Advanced">Charles 高级篇</a></li>
        
            <li><a href="/Charles-Base">Charles 基础篇</a></li>
        
        </ul>

        <h2>Opinion</h2>
        <ul class="artical-list">
        
        </ul>

        <h2>Project</h2>
        <ul class="artical-list">
        
            <li><a href="/alimf">Alimf</a></li>
        
        </ul>
    </div>
</div>

<script src="/js/post.js" type="text/javascript"></script>



    <div class="hide">

        <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1252904265'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1252904265' type='text/javascript'%3E%3C/script%3E"));</script>    </div>
    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();

                if($('.home-contact').is(':visible')){
                    $('.home-contact').slideUp(100);
                }else{
                    $('.home-contact').slideDown(100);
                }
            });
        })
    </script>
</body>
</html>
